<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formulario con Validación de Expresiones Regulares</title>
<link rel="stylesheet" href="style.css"> 
</head>
<body>
    <div class="container">
    <h2>Formulario de Registro</h2>
    <form action="#" method="post" class="formulario">
        <label for="username">Nombre de Usuario (5-15 caracteres):</label>
        <input type="text" id="username" name="username" pattern="^[a-zA-Z0-9]{5,15}$" title="Debe tener entre 5 y 15 caracteres alfanuméricos" placeholder="Usuario">
        <br>

        <div class="form-group">
        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password"
        pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]{8,}$"
        title="Debe tener al menos 8 caracteres incluyendo 1 mayúscula, 1 minúscula, 1 número y 1 carácter especial"
        placeholder="Contraseña" 
         required>
        <span id="password-error" class="error-message"></span>

        <div class="form-group">
        <label for="correo">Correo Electrónico:</label>
        <input type="correo" id="correo" name="email" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" title="Debe ser una dirección de correo electrónico válida"
        placeholder="Correo" required>
        <br>

        <div class="form-group">
        <label for="telefono">Número de Teléfono (formato internacional, ej. +123456789012):</label>
        <input type="telefono" id="telefono" name="telefono" pattern="^\+[0-9]{1,15}$" title="Debe seguir el formato internacional, comenzando con el signo + y hasta 15 dígitos" placeholder="Numero" required>
        <br>
        
        <div class="form-group">
        <label for="fecha">Fecha de nacimiento</label>
            <input type="date" class="input" placeholder="Fecha de nacimiento"
            required min="2000-01-01">

         <div class="form-group"></div>    
        <label for="codigopostal">Código Postal (5 dígitos):</label>
        <input type="text" id="codigopostal" name="codigopostal" pattern="^\d{5}$" title="Debe consistir en exactamente 5 dígitos" placeholder="Codigo Postal" required>
        <br>

        <input type="submit" value="Enviar">
    </form>

    <script>
        document.querySelector('.formulario').addEventListener('submit', function(event) {
        var password = document.getElementById('password').value;
        var regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]{8,}$/;

        if (!regex.test(password)) {
            event.preventDefault();
            var errorMessage = "La contraseña debe tener al menos 8 caracteres incluyendo 1 mayúscula, 1 minúscula, 1 número y 1 carácter especial.";
            document.getElementById('password-error').textContent = errorMessage;
        } else {
            document.getElementById('password-error').textContent = '';
        }
    });
    </script>
</body>
</html>